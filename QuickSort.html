<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title></title>
    <script src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js" type="text/javascript"></script>
    <link rel="stylesheet" href="http://cdn.bootcss.com/bootstrap/3.3.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="http://cdn.bootcss.com/bootstrap/3.3.0/css/bootstrap-theme.min.css">
    <script src="http://cdn.bootcss.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>

    <style type="text/css">
        .col-md-12 {
            margin-top: 5px;
            margin-bottom: 5px;
        }

    </style>


</head>

<body>
<div class="container">

    <div class="row" style="margin-top:50px;">
        <h1 class="text-center">QuickSort</h1>
    </div>
    <div id="buttonsdiv" class="row text-center" style="margin-top:50px;">

    </div>
</div>
</body>
<script type="text/javascript">
    var arrhis=[];
    var arr = [];
    function sort() {
        quick_sort(0,arr.length-1);

    }


    function partition(start,end){
        var low =start;
        var high=end;
        var mid=arr[low];
        while(low<high){
            console.log("mid="+mid);
            while(low<high&&arr[high]>=mid){
                high--;
            }
            swap(low,high);
            while(low<high&&arr[low]<=mid){
                    low++;
            }
            swap(low,high);

        }
        console.log(""+arr);
        var arr2=new Array();
        for(var i=0;i<arr.length;i++){
            arr2.push(arr[i]);
        }
        arrhis.push(arr2);
        return low;
    }



    function quick_sort(start,end){
        if(start>=end){
             return ;
        }
            var mid=partition(start,end);
            quick_sort(start,mid-1);
            quick_sort(mid+1,end);

    }

    function swap(a,b){
        console.log(a+"  "+b +"before"+arr);
        var  tmp = arr[a];
        arr[a]=  arr[b];
        arr[b] = tmp;
        console.log(a+"  "+b +"after"+arr);
    }


    function draw(buttons){
        var html="";

        for(var n=0;n<buttons.length;n++){
             html=html+"<button type=\"button\" class=\"btn btn-primary\" style=\"margin-left:5px;\">"+buttons[n]+"</button>";
        }

        $("#buttonsdiv").html(html);

    }
    function random(){
        for(var i=0;i<100;i++){
            arr.push(Math.floor(Math.random() * 100 ));
        }
    }
    random();
    sort();

    show();
function show(){
    this.timer = setInterval(function(){
        if(arrhis.length>0){
            draw(arrhis.shift());
        }else{
            clearInterval(this.timer);
        }
    },200);
}
</script>
</html>